# Benchmark Run: 2025-12-30

## Configuration

- **Repository**: Pith (self-test)
- **Size**: 29 files, ~8k lines
- **Pith version**: 19cb8d4
- **Model**: qwen/qwen-turbo

## Pipeline Metrics

| Stage | Time | Notes |
|-------|------|-------|
| Extraction | 7.4s | 29 files extracted |
| Build | 0.7s | 96 nodes created |
| Generation | 124.3s | 39 nodes with prose |
| **Total** | ~133s | |

- Nodes created: 29 file, 57 function, 10 module (96 total)
- Nodes with prose: 39 (files + modules only)
- Estimated cost: ~$0.50-1.00 (qwen-turbo pricing)

## Task Results

### Task 1: Architecture
**Question**: "What are the main components of this codebase and how do they interact?"

| Criterion | Pith | Control |
|-----------|------|---------|
| Relevance | 3 | 5 |
| Completeness | 2 | 5 |
| Accuracy | 4 | 5 |
| Efficiency | 5 | 4 |
| Actionability | 2 | 5 |
| **Total** | 16/25 | 24/25 |

- **Winner**: Control
- **Notes**: Pith identified components but failed to explain interactions. Control provided clear pipeline diagram and data flow.

---

### Task 2: Specific Behavior
**Question**: "How does the prose generator handle errors and retries when the LLM API fails?"

| Criterion | Pith | Control |
|-----------|------|---------|
| Relevance | 2 | 5 |
| Completeness | 2 | 5 |
| Accuracy | 4 | 5 |
| Efficiency | 4 | 5 |
| Actionability | 2 | 5 |
| **Total** | 14/25 | 25/25 |

- **Winner**: Control
- **Notes**: Pith mentioned "retry logic" in gotchas but no details. Control provided exact retry counts, backoff formula, error codes.

---

### Task 3: Relationship
**Question**: "What files would be affected if I changed the WikiNode type definition?"

| Criterion | Pith | Control |
|-----------|------|---------|
| Relevance | 3 | 5 |
| Completeness | 2 | 4 |
| Accuracy | 4 | 4 |
| Efficiency | 4 | 4 |
| Actionability | 2 | 5 |
| **Total** | 15/25 | 22/25 |

- **Winner**: Control
- **Notes**: Pith listed importedBy files but not usage patterns. Control provided line numbers and specific usage details.

---

### Task 4: Debugging
**Question**: "A user reports that generation is very slow. What files should I investigate?"

| Criterion | Pith | Control |
|-----------|------|---------|
| Relevance | 2 | 5 |
| Completeness | 2 | 5 |
| Accuracy | 3 | 5 |
| Efficiency | 1 | 5 |
| Actionability | 2 | 5 |
| **Total** | 10/25 | 25/25 |

- **Winner**: Control
- **Notes**: Pith provided module descriptions with no performance insight. Control identified root cause (sequential LLM calls = 70%+ time) with prioritized investigation list.

---

### Task 5: Modification
**Question**: "I want to add support for JavaScript files (not just TypeScript). What files need changes?"

| Criterion | Pith | Control |
|-----------|------|---------|
| Relevance | 2 | 5 |
| Completeness | 1 | 5 |
| Accuracy | 3 | 5 |
| Efficiency | 1 | 5 |
| Actionability | 1 | 5 |
| **Total** | 8/25 | 25/25 |

- **Winner**: Control
- **Notes**: Pith only described module purposes. Control provided exact line numbers, required changes, and identified core challenge (ts-morph limitation).

---

## Summary

| Metric | Pith | Control |
|--------|------|---------|
| Average score | 12.6/25 | 24.2/25 |
| Win/Loss/Tie | 0-5-0 | 5-0-0 |

### Score Breakdown by Criterion

| Criterion | Pith Avg | Control Avg |
|-----------|----------|-------------|
| Relevance | 2.4 | 5.0 |
| Completeness | 1.8 | 4.8 |
| Accuracy | 3.6 | 4.8 |
| Efficiency | 3.0 | 4.8 |
| Actionability | 1.8 | 5.0 |

### Key Observations

1. **Pith's strengths**:
   - Accuracy is reasonable (3.6/5) - the prose is generally correct
   - Efficiency is decent for high-level overviews
   - Fast retrieval once wiki is built

2. **Pith's weaknesses**:
   - Completeness severely lacking (1.8/5) - missing critical details
   - Actionability very low (1.8/5) - can't act on the context provided
   - Module-level summaries don't capture function-level behavior
   - No line numbers, code snippets, or specific implementation details
   - Gotchas are too vague to be useful

3. **Control's advantages**:
   - Explores code directly, finds exact line numbers
   - Synthesizes information into actionable summaries
   - Can trace relationships and dependencies dynamically
   - Provides code snippets as evidence

---

## Information Gap Analysis

This section compares what information each approach provides, identifying specific gaps to address.

### Information Type Comparison

| Information Type | Pith | Control | Gap Severity |
|------------------|:----:|:-------:|:------------:|
| Module/file names | ✅ | ✅ | None |
| One-line summary | ✅ | ✅ | None |
| Purpose description | ✅ | ✅ | Minor |
| Gotchas/warnings | ⚠️ Vague | ✅ Specific | **High** |
| Key exports list | ✅ | ✅ | None |
| Import relationships | ✅ | ✅ | Minor |
| Fan-in/fan-out metrics | ✅ | ❌ | None (Pith advantage) |
| Git metadata | ✅ | ❌ | None (Pith advantage) |
| **Line numbers** | ❌ | ✅ | **Critical** |
| **Code snippets** | ❌ | ✅ | **Critical** |
| **Function signatures** | ⚠️ Raw only | ✅ Explained | **High** |
| Specific variable/config values | ❌ | ✅ | **High** |
| Implementation details | ❌ | ✅ | **Critical** |
| Error handling logic | ❌ | ✅ | **High** |
| Data flow explanation | ❌ | ✅ | **High** |
| Priority/criticality ranking | ❌ | ✅ | Medium |
| Test file locations | ✅ | ✅ | None |
| Suggested changes | ❌ | ✅ | **High** |

### Concrete Example: Task 2 (Error Handling)

| Detail | Pith Said | Control Said | Gap |
|--------|-----------|--------------|-----|
| Retry exists? | "has retry logic" | "maxRetries = 3" | **Missing specifics** |
| Backoff strategy? | ❌ Not mentioned | "2^attempt seconds (2s, 4s)" | **Missing entirely** |
| What triggers retry? | ❌ Not mentioned | "429, 5xx, timeout, network errors" | **Missing entirely** |
| Timeout value? | ❌ Not mentioned | "30 seconds default" | **Missing entirely** |
| Code location? | ❌ Not mentioned | "Lines 431-527" | **Missing entirely** |

### Concrete Example: Task 5 (JS Support)

| Detail | Pith Said | Control Said | Gap |
|--------|-----------|--------------|-----|
| Files to change? | "ast.ts parses TypeScript" | "src/extractor/ast.ts lines 114, 129, 163-167" | **No line numbers** |
| What to change? | ❌ Not mentioned | "Change `['**/*.ts']` to include `.js`" | **No specifics** |
| Core challenge? | ❌ Not mentioned | "ts-morph is TypeScript-focused" | **Missing insight** |
| Test updates needed? | ❌ Not mentioned | "3 test files need updates" | **Missing entirely** |

### Summary: The Core Gap

**Pith provides**: High-level "what" and "why" (orientation)
**Control provides**: Detailed "how" and "where" (implementation)

The fundamental issue is that **Pith's prose is designed for understanding, not action**.

---

### Root Cause Analysis

The fundamental issue is that **Pith's prose generation is too high-level**. The current prompts ask for:
- Summary (1 sentence)
- Purpose (2-3 sentences)
- Gotchas (warnings)

But they don't capture:
- Specific implementation details
- Line numbers or code references
- Function-level behavior
- Concrete examples from the code

### Recommendations

1. **Immediate**: Enhance prose prompts to include:
   - Key line numbers for important logic
   - Concrete code snippets in examples
   - Specific function behaviors, not just module overviews

2. **Medium-term**: Add function-level prose generation
   - Currently only file/module nodes get prose
   - Function nodes would help with specific behavior questions

3. **Long-term**: Consider hybrid approach
   - Use Pith for initial orientation/overview
   - Fall back to code exploration for details
   - Include raw code snippets in context bundles

---

## Revision History

| Date | Change | Author |
|------|--------|--------|
| 2025-12-30 | Initial benchmark run | Claude |
| 2025-12-30 | Added Information Gap Analysis tables | Claude |
